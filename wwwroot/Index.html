<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Classifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="mt-6">
        <h2 class="mb-3">Email Classification Results</h2>
        <div class="table-bordered" style="width:100%">
            <table class="table table-bordered table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Email Name</th>
                        <th>Email Extension</th>
                        <th>Email Attachments</th>
                        <th>Extracted Text</th>
                        <th>Predicted Request Type</th>
                        <th>Confidence Score</th>
                        <th>Request Type Confidence Scores</th>
                        <th>Predicted Sub Request Type</th>
                        <th>Sub Request Confidence Score</th>
                        <th>Sub Request Type Confidence Scores</th>
                    </tr>
                </thead>
                <tbody id="emailTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $.ajax({
                url: "/EmailClassifier/PredictData",
                method: "GET",
                dataType: "json",
                success: function (response) {
                    let tableBody = $("#emailTableBody");
                    tableBody.empty(); // Clear previous data
          debugger;
                    response.forEach(function (email) {
                        let row = `<tr>
                            <td>${email.emailName}</td>
                            <td>${email.emailExtension}</td>
                            <td>${email.emailAttachments}</td>
                            <td>${email.extractedText}</td>
                            <td>${email.predictedRequestType}</td>
                            <td>${email.predictedRequestTypeConfidenceScore}</td>
                            <td>${email.requestTypeConfidenceScores}</td>
                            <td>${email.predictedSubRequestType}</td>
                            <td>${email.predictedSubRequestTypeConfidenceScore}</td>
                            <td>${email.subRequestTypeConfidenceScores}</td>
                        </tr>`;
                        tableBody.append(row);
                    });
                },
                error: function () {
                    alert("Error fetching email classification data.");
                }
            });
        });
    </script>
</body>
</html>
